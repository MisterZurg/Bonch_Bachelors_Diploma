# Сравнение CLI и SDN контроллера управления сетью
## Цель лабораторной работы:
- Часть 1: Изучение топологии сети
- Часть 2: Использование CLI для сбора информации
- Часть 3: Настройка контроллера SDN
- Часть 4: SDN контроллер для обнаружения топологии
- Часть 5: SDN контроллер для сбора информации
- Часть 6: SDN контроллер для настройки параметров сети

## Необходимые ресурсы:
- 1 ПК
- Packet Tracer 7.4.0

## Таблица адресации
|Устройство|	Интерфейс|	IP Адрес|
|:---:|:---:|:---:|
|  R1 | G0/0/0	| 192.168.101.1 |
|^^   | S0/1/0	| 192.168.1.2   |
|  R2 | G0/0/0	| 192.168.101.2 |
| ^^  | S0/1/1	| 192.168.2.2   |
|  R3 |  G0/0/0	| 10.0.1.1       |
|  ^^   |  G0/0/1	| 10.0.2.1|
|  ^^   | S0/1/0	| 192.168.1.1|
|  ^^   |  S0/1/1	| 192.168.2.1|
|SWL1	|VLAN 1	|192.168.101.2|
|SWL2	|VLAN 1	|192.168.102.2|
|SWR1	|VLAN 1	|10.0.1.2|
|SWR2	|VLAN 1	|10.0.1.3|
|SWR3	|VLAN 1	|10.0.1.4|
|SWR4	|VLAN 1	|10.0.1.5|
|Admin	|NIC	|10.0.1.129|
|PC1	|NIC	|10.0.1.130|
|PC2	|NIC	|10.0.2.129|
|PC3	|NIC	|10.0.2.130|
|PC4	|NIC	|192.168.102.3|
|Example Server	|NIC |	192.168.101.100|
|PT-Controlle	|NIC |	192.168.101.254|

## Порядок выполнения работы
## Часть 1: Изучение топологии сети
> В этой части вы познакомитесь с топологией, которую будете использовать для работы по программированию сети.
### Шаг 1: Изучите документацию по конфигурации сети
Сеть настроена следующим образом:
- Маршрутизаторы работают под управлением OSPFv2.
- SSH включен на всех устройствах с пользователем cisco и паролем cisco123!
- На R1 нет хостов.
- R2 LAN IPv4 настроен статически.
- R3 является сервером DHCPv4 для LAN1 и LAN2.
- Коммутаторы относятся к уровню 2 (без VLAN).
- Все коммутаторы SWR# принадлежат к LAN1.

### Шаг 2: Убедитесь, что все устройства могут пинговать друг друга.
Либо используйте командную строку на каждом устройстве, либо используйте инструмент Add Simple PDU (P), чтобы проверить, что все устройства могут пинговать друг друга

## Часть 2: Использование CLI для сбора информации
> В этой части вы вручную обращаетесь к каждому устройству, чтобы собрать информацию о версии программного обеспечения.

### Шаг 1: С Admin PC получите безопасный доступ к коммутатору SWR3.
Щелкните Admin > Desktop > Command Prompt.
Введите команду ssh -l cisco 10.0.1.4. Параметр -l - это буква "L", а не цифра один.
Когда появится запрос, введите cisco123! в качестве пароля. Теперь вы вошли в систему SWR3.

### Шаг 2: Соберите информацию о программном обеспечении на SWR3.
Введите следующую команду, чтобы отфильтровать вывод команды show version для просмотра только установленной версии. RELEASE SOFTWARE, установленного на устройстве. Обратите внимание, что SWR3 работает под управлением IOS 16.3.2 и Boot Loader 4.2.6

```shell
SWR3# show version | include RELEASE
Cisco IOS Software [Denali], Catalyst L3 Switch Software (CAT3K_CAA-UNIVERSALK9-M), Version 16.3.2, RELEASE SOFTWARE (fc4) BOOTLDR: CAT3K_CAA Boot Loader (CAT3K_CAA-HBOOT-M) Version 4.26, RELEASE SOFTWARE (P)
SWR3#
```
Скопируйте информацию в буфер обмена
Откройте пустой файл в текстовом редакторе и вставьте в него скопированную информацию.
Сохраните файл под именем software-versions.txt

### Шаг 3: Соберите информацию о программном обеспечении для остальных сетевых устройств.
Из командной строки на SWR3 получите безопасный доступ к другому сетевому устройству и повторите Шаг 2 выше.
Продолжайте документировать версии программного обеспечения, пока не закончите работу со всеми девятью сетевыми устройствами: SWL1, SWL2, SWR1, SWR2, SWR3, SWR4, R1, R2 и R3.
Выйдите из всех сеансов SSH.

## Часть 3: Настройка контроллера SDN
> В течение многих лет сетевые администраторы использовали ранние средства автоматизации, такие как сценарии bash или программное обеспечение с поддержкой SNMP, чтобы выполнить процесс, аналогичный тому, что вы сделали в предыдущем шаге. Однако с появлением SDN, этот процесс был значительно усовершенствован. Packet Tracer предоставляет простой PT-Controller для имитации контроллера SDN. В этой части вы подключите и настроите PT-Controller.

> Примечание: Чтобы узнать больше о реализации сетевого контроллера в Packet Tracer, щелкните меню Справка, затем Содержание. В указателе слева, примерно в середине, вы найдете заголовок Configuring Devices (Настройка устройств). Под этим заголовком найдите пункт Сетевые контроллеры.

### Шаг 1: Добавьте сетевой контроллер в топологию.
В левом нижнем углу интерфейса Packet Tracer нажмите End Devices > Network Controller.
Добавьте сетевой контроллер в пустое место слева от коммутатора SWL1. Его имя уже должно быть PT-Controller0. Если это не так, щелкните имя и измените его.
Внизу снова нажмите на кнопку с изображением Connections. Щелкните на Copper StraightThrough кабель.
Щелкните PT-Controller0 и выберите GigabitEthernet0. Затем щелкните SWL1 и выберите первый доступный интерфейс Gigabit Ethernet.

### Шаг 2: Настройте подключение для PT-Controller0.
Нажмите PT-Controller0 > Config
Для параметра Gateway/DNS IPv4 введите 192.168.101.1 в качестве адреса шлюза.
Слева в разделе INTERFACE нажмите GigabitEthernet0.
Для конфигурации IP введите IP-адрес 192.168.101.254 и маску подсети 255.255.255.0.
Слева в разделе REAL WORLD нажмите Controller. Если Server Status - Stopped, перейдите к следующему подэтапу. Если в Preferences, Server Status - Disabled, то вам необходимо включить внешний доступ следуя следующим инструкциям:
1)	Выберите Options > Preferences в меню Packet Tracer;
2)	Нажмите Miscellaneous;
3)	В разделе External Network Access нажмите Enable External Access для REST-интерфейса сетевого контроллера API;
4)	При необходимости закройте Preferences и нажмите PT-Controller0 > Config;
5)	Слева в разделе REAL WORLD нажмите Controller.
Статус сервера теперь должен быть Stopped. Нажмите Access Enabled, чтобы включить его. Состояние сервера изменится на Listening на порту 58000. Если порт имеет другое значение, измените его на 58000. Это номер порта в скриптах Python

### Шаг 3: Проверьте подключение к PT-Controller0 от имени администратора.
Убедитесь, что администратор может выполнить ping PT-Controller0. Если вы не можете выполнить ping, убедитесь, что ваша конфигурация соответствует
спецификациям, указанным в предыдущем шаге.

### Шаг 4: Зарегистрируйте нового пользователя и войдите в систему PT-Controller0.
Щелкните Admin > Desktop > Web Browser.
Введите IPv4-адрес 192.168.101.254 для доступа к настройке пользователя для PT-Controller0.
Введите cisco в поле Имя пользователя и cisco123! в полях Пароль и Подтверждение пароля, а затем нажмите SETUP.

> Примечание: Вы можете использовать здесь любое имя пользователя и пароль. Для простоты мы рекомендуем использовать общие учетные данные, используемые в остальной части работы.

На экране входа пользователя в систему введите свои учетные данные и нажмите кнопку LOG IN.
Теперь вы вошли в панель управления PT-Controller0. На данном этапе может быть полезно развернуть окно, чтобы вы могли видеть весь интерфейс.

## Часть 4: SDN контроллер для обнаружения топологии
> В этой части вы настроите PT-Controller0 на использование протокола Cisco Discover Protocol (CDP) для автоматического обнаружения девяти сетевых устройств в вашей топологии. PT-Controller0 также обнаружит все пять хост-устройств, подключенных к сети

### Шаг 1: Добавьте учетные данные для доступа ко всем сетевым устройствам в топологии.
В графическом интерфейсе Network Controller нажмите кнопку меню.
Выберите Provisioning. Отсюда вы можете вручную добавить сетевые устройства. Однако вы будете использовать CDP для автоматического обнаружения устройств.
Нажмите CREDENTIALS и затем нажмите + CREDENTIAL, чтобы добавить новую учетную запись.
Для имени пользователя введите cisco, а для пароля введите cisco123! Оставьте Enable Password пустым. Для Description введите admin credentials, а затем нажмите OKAY.
Новые учетные данные CLI теперь хранятся на PT-Controller0 для использования в задачах автоматизации.

### Шаг 2: Используйте CDP для обнаружения всех устройств в сети.
Нажмите DISCOVERY, а затем нажмите + DISCOVERY, чтобы добавить новое открытие.
Для имени введите SWL1. Для IP-адреса введите 192.168.101.2. Для CLI Credential List опустите список вниз и выберите cisco - admin credentials.
Нажмите ADD.
Теперь вы должны увидеть статус In Progress. Вы можете подождать, пока Packet Tracer завершит моделирование этого процесс или нажать кнопку Fast Forward Time в главном окне Topology, чтобы ускорить процесс.

## Часть 5: SDN контроллер для сбора информации
> В этой части вы будете использовать графический интерфейс PT-Controller0 для просмотра информации о сетевых устройствах и хост-устройствах в топологии. Вы просмотрите топологию, созданную контроллером, а затем проведете трассировку пути по сети.

### Шаг 1: Просмотрите список обнаруженных сетевых устройств.
Нажмите NETWORK DEVICE. Теперь вы должны увидеть все девять сетевых устройств в списке.
Нажмите на значок шестеренки рядом с именем хоста любого устройства, чтобы просмотреть информацию, собранную в процессе обнаружения процессом обнаружения. Обратите внимание, что в списке указана версия программного обеспечения, а также множество другой подробной информации об устройстве.

### Шаг 2: Просмотрите список всех обнаруженных хост-устройств.
Вернитесь на Dashboard. Щелкните меню рядом, затем выберите Dashboard. (Вы также можете просто щелкнуть по баннеру сетевого контроллера, чтобы вернуться на Dashboard из любого места).
На Dashboard’e вы увидите графики с количеством узлов, с которыми можно связаться по протоколу ping, и количеством сетевых устройств, которые находятся под управлением. Оба показателя должны быть равны 100%.
Вы также должны увидеть плитки для QoS, сетевого устройства и хоста. Нажмите на значок шестеренки для Host. Это приведет вас на вкладку HOSTS для ASSURANCE.
На этой странице вы можете просмотреть всю информацию о подключении уровней 2 и 3 для каждого хоста, а также сетевое устройство, к которому он подключен.
Нажмите на значок шестеренки рядом с любым узлом, чтобы просмотреть более подробную информацию.

### Шаг 3: Просмотрите топологию, созданную PT-Controller0.
Перейдите на вкладку TOPOLOGY. Обратите внимание, что PT-Controller динамически создал ту же топологию, которую вы видите в главном окне Packet Tracer.
В этом окне вы можете щелкнуть любое сетевое устройство, чтобы просмотреть его подробную информацию.
Вы также можете щелкнуть и перетащить значки устройств, чтобы изменить топологию. Однако ваши изменения не будут сохранены, когда вы покинете рабочую область TOPOLOGY.

### Шаг 4: Проследите путь от одного устройства к другому.
Перейдите на вкладку PATH TRACE.
Нажмите + PATH, чтобы добавить новый путь.
Проследите путь от одного конца сети до другого. Например, можно ввести IP-адреса от PC1 до PC4. Затем нажмите OKAY.
Нажмите на новый путь, который был добавлен, чтобы начать трассировку пути.
Вы получите отчет Маршрут, в котором показаны все переходы от источника к пункту назначения. Обратите внимание, что в списке указана информация только об устройствах уровня 3. Коммутаторы показаны как устройства UNKNOWN. Это потому, что все они работают только на уровне 2.

## Часть 6: SDN контроллер для настройки параметров сети
> Основным преимуществом автоматизации сети с помощью контроллера является возможность конфигурировать глобальные сетевые настройки и политики для всех устройств, а затем передавать эту конфигурацию нажатием одной кнопки. В этой части вы настроим PT-Controller0 с сетевыми параметрами для DNS, NTP и Syslog. Затем вы передадите эту конфигурацию на поддерживаемые сетевые устройства. Наконец, вы проверите и протестируете политику.

### Шаг 1: Изучите конфигурацию сервера Example.
Нажмите Example Server > Services.
В разделе SERVICES щелкните DNS. Обратите внимание, что служба DNS включена и что есть одна запись для www.example.com.
В разделе SERVICES выберите SYSLOG. Обратите внимание, что служба Syslog включена.
В разделе SERVICES выберите NTP. Обратите внимание, что служба NTP включена.

### Шаг 2: Настройте глобальную политику для DNS, SYSLOG и NTP.
Нажмите кнопку Admin. Если вы закрыли Admin, вам нужно будет открыть приложение Web Browser и повторно пройти аутентификацию на PT-Controller0.
Щелкните меню > Policy.
На вкладке QOS обратите внимание на наличие опций для настройки области действия и политики. В этом задании вы будете настраивать e NETWORK SETTINGS.
Нажмите NETWORK SETTINGS > DNS. Введите example.com в качестве доменного имени и 192.168.101.100 в качестве IP-адреса.
Нажмите Save.
Щелкните NTP. Введите 192.168.101.100 в качестве IP-адреса.
Нажмите Save.
Нажмите SYSLOG. Введите 192.168.101.100 в качестве IP-адреса.
Нажмите Save.
Снова нажмите DNS, NTP и SYSLOG, чтобы проверить правильность информации. Если нет, исправьте информацию сохраняя каждый раз.
Нажмите PUSH CONFIG.
Откроется диалоговое окно Push All Network Settings. Проверьте настройки и нажмите OKAY. На экране появится сообщение “Saved Successfully” появится короткое сообщение.

### Шаг 3: Проверьте и протестируйте сетевые настройки, которые были переданы на устройства.
В нижней части окна NETWORK SETTINGS находится следующее:

> Примечание: Эта функциональность поддерживается только на устройствах под управлением ОС IOS-XE и Switch 2960-24TT. Это означает, что для данной версии Packet Tracer ваши глобальные настройки применяются только к маршрутизаторам.

Щелкните любой из трех маршрутизаторов. R1 показан в следующем выводе.
Щелкните CLI.
Щелкните внутри окна и нажмите Enter, чтобы получить командную строку.
Войдите в привилегированный режим EXEC и проверьте настройки DNS.
```shell
R1> enable
R1# show run | begin ip domain
ip domain-name example.com
ip name-server 192.168.101.100
!
<вывод опущен>
R1#
```
Введите следующие команды для проверки настроек NTP. Время на R1 должно совпадать с вашим текущим временем. Packet Tracer может потребоваться некоторое время для распространения сообщений NTP. Вы можете нажать кнопку Fast Forward Time чтобы ускорить процесс.
```shell
R1# show ntp associations

address ref clock st when poll reach delay offset disp
*~192.168.101.100127.127.1.1 1 12 16 377 0.00 0.00 0.12
* sys.peer, # selected, + candidate, - outlyer, x falseticker, ~ configured
R1# show clock
15:30:54.268 UTC Thu Jun 11 2020
R1#
```
Введите следующую команду, чтобы убедиться в том, что ведение журнала настроено.
```shell
R1# show run | include logging
logging 192.168.101.100
R1#
```
Чтобы проверить ведение журнала, выключите интерфейс Serial0/1/0, а затем снова включите его.
```shell
R1# configure terminal
Enter configuration commands, one per line. End with CNTL/Z.
R1(config)# interface s0/1/0
R1(config-if)# shutdown
%LINK-5-CHANGED: Interface Serial0/1/0, changed state to administratively down
%LINEPROTO-5-UPDOWN: Line protocol on Interface Serial0/1/0, changed state to down
15:36:37: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.2.1 on Serial0/1/0 from FULL to DOWN, Neighbor Down: Interface down or detached
R1(config-if)# no shutdown
%LINK-5-CHANGED: Interface Serial0/1/0, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface Serial0/1/0, changed state to up
15:36:53: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.2.1 on Serial0/1/0 from LOADING to FULL, Loading Done
R1(config-if)# end
R1#
```
Нажмите Example Server > Services > SYSLOG. Вы должны увидеть, что те же сообщения syslog, которые вы видели на CLI, также записываются на сервер. Дважды щелкните любую из записей, чтобы просмотреть сообщения.