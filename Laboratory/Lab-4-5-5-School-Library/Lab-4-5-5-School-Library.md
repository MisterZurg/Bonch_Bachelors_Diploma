# Изучение Rest API с помощью API Simulator и Postman
## Цель лабораторной работы:
- Часть 1: Запуск виртуальной машины DEVASC
- Часть 2: Исследование документации API с помощью API Simulator
- Часть 3: Использование Postman для выполнения вызовов API в API Simulator
- Часть 4: Использование Python для добавления 100 книг в API Simulator

## Необходимые ресурсы:
- 1 ПК
- Virtual Box или VMWare
- DEVASC виртуальная машина

## Порядок выполнения работы
## Часть 1: Запуск виртуальной машины DEVASC
> Если вы еще не завершили лабораторную работу - Установка лабораторной среды виртуальной машины, сделайте это сейчас. Если вы уже завершили эту лабораторную работу, запустите виртуальную машину DEVASC.

## Часть 2: Исследование документации API с помощью API Simulator
> Чтобы понять, как обращаться к REST API, разработчики обычно начинают с изучения документации по API. Формат запросов, ответов, заголовков и параметров для REST API обычно документируется с помощью спецификации OpenAPI (ранее Swagger Specification).

### Шаг 1: Откройте веб-браузер Chromium.
Дважды щелкните значок веб-браузера Chromium на рабочем столе.

### Шаг 2: Подключитесь к веб-сайту студенческой библиотеки.
Если браузер автоматически не открывает сайт библиотеки, в адресной строке наберите: library.demo.local и нажмите кнопку return, чтобы перейти туда.

### Шаг 3: Перейдите на страницу документации API.
На веб-сайте по умолчанию открывается вкладка Our Books и отображается список книг. В правом верхнем углу, где написано: Click here for API docs, нажмите здесь, чтобы перейти на веб-страницу документации API.

Теперь вы увидите список API в пространстве имен /api/v1 Default.

Обратите внимание на стрелку, направленную вниз в крайнем правом углу. Щелчок в любом месте на полосе /api/v1 свернет список API и повернет стрелку вправо. Щелкните еще раз на той же полосе, чтобы снова отобразить список API.
Обратите внимание на замок справа от нескольких API. Замок указывает на то, что для использования этих API требуется токен.

### Шаг 4: Получите список книг с помощью API GET /books.
Нажмите в любом месте панели для API GET /books. Этот API возвращает список книг в библиотеке.
- **Parameters** — Существует несколько необязательных параметров API. Их можно использовать для фильтрации, сортировки или постраничного вывода.
- **Response content type** — Выберите application/json, чтобы увидеть список различных форматов данных, в которых можно просматривать информацию. Выберете как application/json. 
- **Code** — По умолчанию в коде отображается 200, что означает, что запрос API от сервера был успешным, как показано в описании. (Вы еще не отправляли API-запрос).

### Шаг 5: Используйте функцию Try it out в документации API.
Одной из наиболее мощных возможностей спецификации OpenAPI является возможность протестировать вызов API, чтобы проверить, правильно ли вы его создали. Вы также можете просмотреть ответ, чтобы убедиться, что он соответствует вашим ожиданиям. Подобную возможность тестирования вы можете увидеть в документации по API для других организаций, которые используют эту возможность спецификации OpenAPI.
В документации API GET /books нажмите кнопку **Try it out**.

Обратите внимание, что теперь у вас есть возможность ввести информацию для необязательных параметров. Оставьте параметры пустыми и нажмите кнопку Execute.

В разделе "Ответы" вы увидите:
- Curl: Команда curl, которую вы можете использовать для получения доступа к той же информации для API /books. 
- URL запроса: Этот URL используется в запросе API, который можно использовать для запроса той же информации с помощью curl, Postman и Python.
- Code: Это код ответа HTTP. 200 означает успешный вызов. 
- Response body: Список книг в формате JSON.
- Response header: Информация об API, возвращенная с сервера.
В Response body вы увидите список книг в формате JSON:
```json
[
    {
        "id": 0,
        "title": "IP Routing Fundamentals",
        "author": "Mark A. Sportack"
    },
    {
        "id": 1,
        "title": "Python for Dummies",
        "author": "Stef Maruch Aahz Maruch"
    },
    {
        "id": 2,
        "title": "Linux for Networkers",
        "author": "Cisco Systems Inc."
    },
    {
        "id": 3,
        "title": "NetAcad: 20 Years Of Online-Learning",
        "author": "Cisco Systems Inc."
    }
]
```

### Шаг 6: Используйте команду curl в окне терминала.
API GET /books предоставляет информацию для доступа к содержимому, отображаемому в теле ответа, с помощью curl. curl — это инструмент командной строки для передачи данных на сервер или с сервера, используя любой из поддерживаемых протоколов, включая HTTP и HTTPS.

Выберите команду curl, щелкните правой кнопкой мыши и скопируйте ее в буфер обмена:
```shell
curl -X GET "http://library.demo.local/api/v1/books" -H "accept: application/json"
```
Откройте окно терминала. Щелкните правой кнопкой мыши и вставьте содержимое из буфера обмена в терминал, затем нажмите Enter. Обратите внимание, что вывод предоставляет ту же информацию, что и интерфейс OpenAPI библиотеки.
```shell
devasc@labvm:~$ curl -X GET "http://library.demo.local/api/v1/books" -H "accept: application/json"
```

### Шаг 7: Получите список книг с их ISBN, используя API GET /books.
Вернитесь к API GET /books API веб-сайта API библиотеки.
В разделе Параметры выберите стрелку вниз рядом с параметром includeISBN и выберите true.

Нажмите Execute.
Обратите внимание на следующие изменения в разделе Responses:
- Curl теперь включает параметр для ISBN. curl -X GET "http://library.demo.local/api/v1/books?includeISBN=true" -H "accept: application/json"
- URL запроса теперь включает параметр для ISBN.http://library.demo.local/api/v1/books?includeISBN=true 
- Тело ответа содержит тот же список книг, что и ранее, но теперь включает ISBN книги.
Чтобы минимизировать прокрутку, когда вы закончите работу с API, вы можете закрыть это конкретное окно API, щелкнув в любом месте строки заголовка. Теперь вы можете легко просмотреть все API.

### Шаг 8: Получите токен с помощью API POST /loginViaBasic.
Щелкните API POST /loginViaBasic.

Обратите внимание, что параметров нет. Нажмите Try it out, а затем нажмите Выполнить.
В окне Вход в систему вам будет предложено ввести имя пользователя и пароль. Введите следующую информацию и нажмите Sign in:
**Username**: cisco
**Password**: Cisco123!

Токен будет отображен в теле ответа. Выберите информацию между кавычками, щелкните правой кнопкой мыши и скопируйте ее в буфер обмена. Ваш токен будет отличаться от показанного ниже.
```json
{
  "token": "cisco|KZZzteQbC5iV3HKEzB7hCJ6qHQXen4rLGh72YJKeVfs"
}
```
Прокрутите вверх до верхней части страницы API школьной библиотеки и нажмите зеленую кнопку Authorize. Появится диалоговое окно Доступные авторизации.
Щелкните правой кнопкой мыши, вставьте маркер после Value и нажмите Authorize. Обратите внимание, что Имя — X-API-KEY. Эта информация вместе с маркером будет использоваться позже в Postman.

Закройте диалоговое окно Available authorizations и вернитесь к списку API. Обратите внимание, что блокировки некоторых API изменились. Теперь эти API доступны для использования.

Щелкните по строке для API POST /loginViaBasic, чтобы закрыть окно.

### Шаг 9: Добавьте книги с помощью API POST /books.
Нажмите API POST /books.
В разделе Parameters обратите внимание на то, что полезная нагрузка является обязательной. Это означает, что данный API требует информацию для этого параметра в формате, указанном типом содержимого Parameter, который является JSON.
Нажмите кнопку Try it out.
Измените id, title и author с помощью информации, показанной ниже.
```json
{
  "id": 4,
  "title": "Industrial Society and Its Future",
  "author": "Theodore John Kaczynski"
}
```
Нажмите **Execute**.
Проверьте успешность отправки сообщения в ответе сервера. Код 200 означает, что отправка сообщения прошла успешно. В теле ответа вы должны увидеть книгу, которую вы добавили, а также новый идентификатор. Вы также увидите обновленную информацию для curl и URL запроса.

Чтобы добавить ещё одну книгу, измените id, title и author с помощью информации, показанной ниже.
```json
{
  "id": 5,
  "title": "Первая научная история войны 1812 года",
  "author": "Евгений Николаевич Понасенков"
}
```
Нажмите **Execute**.
Проверьте успешность отправки сообщения в ответе сервера. Код 200 означает, что отправка была успешной. Вы должны увидеть книгу, которую вы добавили, в теле ответа вместе с новым идентификатором. Вы также увидите обновленную информацию для curl и URL запроса.

> Примечание: Если вы получили код 401, проверьте текст тела ответа. Скорее всего, вы получили ответ "error": "Invalid API key". Это происходит потому, что вы ввели не все символы для вашего API-ключа. Или, возможно, вы добавили ненужный пробел. Вернитесь к предыдущему шагу и повторите процесс авторизации.

Щелкните по строке для API POST /books, чтобы закрыть окно.

Вы можете проверить, что книги были добавлены на страницу "Наши книги". Вернитесь на вкладку School Library в браузере (http://library.demo.local) и обновите страницу. Будьте осторожны, чтобы не закрыть вкладку API школьной библиотеки. Если вы это сделаете, то вам придется повторно пройти аутентификацию.

### Шаг 10: Получите список книг с помощью API GET /books.
Вернитесь на вкладку API школьной библиотеки в браузере. Щелкните на API GET /books.
Нажмите кнопку **Try it out**. Если вы видите кнопку **Cancel** красного цвета, значит, вы уже находитесь в режиме тестирования. 
Нажмите **Execute**.
В разделе Server response в Response body вы увидите две добавленные вами книги. Обратите внимание, что каждая из них имеет уникальный идентификатор.
```json
[
  {
    "id": 0,
    "title": "IP Routing Fundamentals",
    "author": "Mark A. Sportack"
  },
  {
    "id": 1,
    "title": "Python for Dummies",
    "author": "Stef Maruch Aahz Maruch"
  },
  {
    "id": 2,
    "title": "Linux for Networkers",
    "author": "Cisco Systems Inc."
  },
  {
    "id": 3,
    "title": "NetAcad: 20 Years Of Online-Learning",
    "author": "Cisco Systems Inc."
  },
  {
    "id": 4,
    "title": "Industrial Society and Its Future",
    "author": "Theodore John Kaczynski"
  },
  {
    "id": 5,
    "title": "Первая научная история войны 1812 года",
    "author": "Евгений Николаевич Понасенков"
  }
]
```
Щелкните по строке API GET /books, чтобы закрыть окно.

### Шаг 11: Внесите конкретную книгу в список, используя GET /books{id} API.
Нажмите кнопку GET /books{id} API. Обратите внимание, что этот API требует id в качестве параметра.
Справа от Parameters нажмите кнопку Try it out.
В разделе Parameters введите 5 для требуемого идентификатора.
Нажмите кнопку Execute. Обратите внимание на информацию, предоставленную Curl и Request URL.
- Curl — Это команда curl для выполнения той же функции с помощью curl.
- URL запроса — Это URL, который можно использовать для получения той же информации с помощью Postman и Python.
Убедитесь, что получение было успешным в ответе сервера. Код 200 означает, что отправка прошла успешно. В теле ответа вы увидите запрошенную книгу с идентификатором 5.
```json
{
    "id": 5,
    "title": "Первая научная история войны 1812 года",
    "author": "Евгений Николаевич Понасенков"
}
```

Щелкните на строке для GET /books{id} API, чтобы закрыть окно.

### Шаг 12: Удалите конкретную книгу с помощью API DELETE /books{id} API.
Нажмите кнопку DELETE /books{id} API. Обратите внимание, что этот API требует id в качестве параметра.
Нажмите **Try it out**. 
В разделе Parameters введите 3.
Нажмите **Execute**
Убедитесь, что удаление прошло успешно, в ответе сервера. Код 200 означает, что удаление прошло успешно. В теле ответа вы увидите удаленную книгу с идентификатором 3.

Щелкните на строке для DELETE /books{id} API, чтобы закрыть окно.

### Шаг 13: Получите список книг с помощью API GET /books.
Нажмите API GET /books.
Нажмите кнопку Try it out. Если вы видите кнопку Cancel красного цвета, значит, вы уже находитесь в режиме тестирования.
Нажмите Execute
В разделе Server response в теле Response больше не будет отображаться книга с id 3.
```json
[
  {
    "id": 0,
    "title": "IP Routing Fundamentals",
    "author": "Mark A. Sportack"
  },
  {
    "id": 1,
    "title": "Python for Dummies",
    "author": "Stef Maruch Aahz Maruch"
  },
  {
    "id": 2,
    "title": "Linux for Networkers",
    "author": "Cisco Systems Inc."
  },
  {
    "id": 4,
    "title": "Industrial Society and Its Future",
    "author": "Theodore John Kaczynski"
  },
  {
    "id": 5,
    "title": "Первая научная история войны 1812 года",
    "author": "Евгений Николаевич Понасенков"
  }
]
```

> Примечание: Не закрывайте вкладку API библиотеки в браузере Chromium. Вы будете использовать документацию API в следующей части.

## Часть 3: Использование Postman для выполнения вызовов API в API Simulator
> В этой части вы будете использовать Postman для выполнения тех же вызовов API, которые вы делали в документации по API студенческой библиотеки. Postman является полезным инструментом, когда веб-сайт разработчика API недоступен, и при этом предоставляет возможность легко сохранять, организовывать и повторно использовать API.

### Шаг 1: Откройте Postman.
Дважды щелкните значок Postman на рабочем столе. Обычно вы входите в Postman.

### Шаг 2: Получите список книг, используя API GET /books.
> Примечание: Не обязательно заводить учетную запись и входить в Postman.

В главном окне рядом с вкладкой Launchpad нажмите на значок плюса "+", чтобы создать запрос без названия. По умолчанию это будет GET-запрос.

Нажмите стрелку вниз рядом с GET, чтобы просмотреть различные операции API, включая GET, POST и DELETE. Оставьте выбор на GET. Нажмите стрелку вверх рядом с GET, чтобы закрыть список.

Нажмите стрелку вниз рядом с GET, чтобы просмотреть различные операции API, включая GET, POST и DELETE. Оставьте выбор на GET. Нажмите стрелку вверх рядом с GET, чтобы закрыть список.

Введите URL-адрес запроса.
Вернитесь на вкладку School Library API в Chromium и, если необходимо, разверните API GET /books.
В разделе Request URL выберите, щелкните правой кнопкой мыши и скопируйте URL в буфер обмена:
`http://library.demo.local/api/v1/books` 

Вернитесь в Postman и вставьте URL рядом с GET, где написано Enter request URL.
Примечание: Если при вставке добавляется строка под URL-адресом, удалите лишнюю строку.

Нажмите кнопку **Send**. Чтобы убедиться, что запрос API прошел успешно, вы увидите ответ, в котором зеленым цветом будет указан код состояния 200 OK. Внизу раскройте раздела Body, чтобы увидеть ответ. Обратите внимание, что по умолчанию используется Pretty и json.

### Шаг 3: Получите токен с помощью API POST /loginViaBasic.
В главном окне нажмите значок плюса "+", чтобы создать новый Untitled Request.
Вернитесь на вкладку School Library API в Chromium и, если необходимо, разверните API POST /loginViaBasic.
В разделе Request URL выберите, щелкните правой кнопкой мыши и скопируйте URL в буфер обмена:
`http://library.demo.local/api/v1/loginViaBasic`

> Примечание: Если URL-адрес запроса больше не отображается, то, вероятно, вы закрыли и снова открыли страницу документации API школьной библиотеки и больше не авторизованы. Нажмите Try it out, затем Execute, а затем повторно авторизуйтесь с именем пользователя cisco и паролем Cisco123!

Вернитесь в Postman и вставьте URL рядом с POST, где написано " Enter request URL".

> Примечание: Если при вставке добавляется строка под URL, удалите лишнюю строку.

Нажмите кнопку Authorization. В этой области заполните следующее:
В выпадающем списке Type выберите Basic Auth.
В полях Username и Password заполните следующие поля:
**Username**: cisco
**Password**: Cisco123!
Нажмите **Send**


При необходимости прокрутите вниз до раздела "Body", чтобы увидеть свой новый токен. Он может отличаться от того, что показан здесь.
```json
{
    "token": "cisco|9DXC08dbBSkHIzIY5s4NJBRLn97xtBGmXEnl8GP2e_4"
}
```

### Шаг 4: Добавьте книгу с помощью API POST /books.
Теперь вы добавите книгу `NetAcad: 20 Years Of Online-Learning`, которую вы удалили в части 2, при использовании функции Try it out в документации API школьной библиотеки.

В главном окне нажмите значок плюса "+", чтобы создать Untitled Request.
Щелкните стрелку вниз рядом с GET и выберите POST
Введите URL-адрес запроса.
Вернитесь на вкладку School Library API в Chromium и разверните API POST /books.
В разделе Request URL выберите, щелкните правой кнопкой мыши и скопируйте URL в буфер обмена:
`http://library.demo.local/api/v1/books`
Вернитесь в Postman и вставьте URL рядом с POST, где написано "Enter request URL".

Примечание: Если при вставке добавляется строка под URL-адресом, удалите лишнюю строку.

Нажмите кнопку Authorization. В этой области заполните следующее:
В раскрывающемся списке Тип выберите API Key.
В поле Ключ введите X-API-KEY.
Вернитесь на вкладку Post в Postman и скопируйте Token, который вы получили в Шаге 3. Не забудьте включить все, что находится в кавычках. Ваш токен будет отличаться от того, что показан здесь.
```json
{
    "token": "cisco|9DXC08dbBSkHIzIY5s4NJBRLn97xtBGmXEnl8GP2e_4"
}
```
Вернитесь на вторую вкладку Post в Postman. Вставьте токен в поле Value
В той же строке с вкладкой Authorization нажмите кнопку Body. В этом разделе вы сможете выбрать формат вводимых данных.
- Нажмите кнопку raw
- Нажмите Текст и измените этот параметр на JSON.
В области ввода вы увидите цифру 1, означающую "строка 1".  Введите следующий объект JSON.
```json
{
  "id": 3,
  "title": "NetAcad: 20 Years Of Online-Learning",
  "author": "Cisco Systems Inc",
  "isbn": "000-0000001123"
}
```
Нажмите **Send**.
Чтобы убедиться, что запрос API прошел успешно, теперь вы увидите ответ, в котором зеленым цветом будет указан код состояния 200 OK.

### Шаг 5: Проверьте книгу с помощью API Get /books.
Вернитесь на первую вкладку GET. Как видите, Postman позволяет легко переключаться между различными вызовами API.
Нажмите кнопку **Send**.
Чтобы убедиться, что запрос API прошел успешно, теперь вы увидите ответ, в котором зеленым цветом будет указан код состояния 200 OK.
Нажмите кнопку **Body**, чтобы просмотреть ответ. Обратите внимание, что по умолчанию используется Pretty и json.
```json
[
    {
        "id": 0,
        "title": "IP Routing Fundamentals",
        "author": "Mark A. Sportack"
    },
    {
        "id": 1,
        "title": "Python for Dummies",
        "author": "Stef Maruch Aahz Maruch"
    },
    {
        "id": 2,
        "title": "Linux for Networkers",
        "author": "Cisco Systems Inc."
    },
    {
        "id": 3,
        "title": "NetAcad: 20 Years Of Online-Learning",
        "author": "Cisco Systems Inc."
    },
    {
        "id": 4,
        "title": "Industrial Society and Its Future",
        "author": "Theodore John Kaczynski"
    }
    {
        "id": 5,
        "title": "Первая научная история войны 1812 года",
        "author": "Евгений Николаевич Понасенков"
    },
]
```

### Шаг 6: Используйте дополнительные параметры с API Get /books.
Перейдите на веб-сайт School Library API. Прокрутите страницу вверх до API GET /books и при необходимости разверните ее.
Обратите внимание на доступные параметры:
- **includeISBN**: Включает в вывод номера ISBN. По умолчанию=false
- **sortBy**: Сортировка результатов с помощью указанного параметра. По умолчанию=id
- **author**: Возвращает только книги указанного автора.
- **page**: Используется для указания номера страницы.
Нажмите кнопку **Try it out**.
Под параметрами:
- Нажмите includeISBN и выберите true
- Нажмите кнопку sortBy и выберите author
Нажмите **Execute**.
В теле ответа вы увидите список книг, теперь отсортированный по авторам и включающий ISBN.
```json
[
  {
    "id": 3,
    "title": "NetAcad: 20 Years Of Online-Learning",
    "author": "Cisco Systems Inc",
    "isbn": "000-0000001123"
  },
  {
    "id": 2,
    "title": "Linux for Networkers",
    "author": "Cisco Systems Inc.",
    "isbn": "000-0000000123"
  },
  {
    "id": 0,
    "title": "IP Routing Fundamentals",
    "author": "Mark A. Sportack",
    "isbn": "978-1578700714"
  },
  {
    "id": 1,
    "title": "Python for Dummies",
    "author": "Stef Maruch Aahz Maruch",
    "isbn": "978-0471778646"
  },
  {
    "id": 4,
    "title": "Industrial Society and Its Future",
    "author": "Theodore John Kaczynski"
  },
  {
    "id": 5,
    "title": "Первая научная история войны 1812 года",
    "author": "Евгений Николаевич Понасенков"
  }
]
```
Обратите внимание, что URL запроса теперь включает параметры. Вы увидите это снова в Postman.
`http://library.demo.local/api/v1/books?includeISBN=true&sortBy=author`
Вернитесь в Postman и перейдите на первую вкладку API, GET http://library.demo.local/api/v1/books. Теперь вы включите некоторые параметры с сайта API школьной библиотеки.

Нажмите Params. Вы увидите под Query Params поля ввода для KEY и VALUE. Введите следующую информацию:
- В поле KEY введите includeISBN, а в поле Value введите true.
Обратите внимание, что слева от значения будет автоматически включена галочка и добавлена новая строка.
- В поле KEY введите sortBy и в поле Value введите author
Обратите внимание, что при вводе этих параметров запроса, он обновил исходный URL рядом с GET. Это тот же URL запроса, который вы видели на веб-сайте API школьной библиотеки для этого же вызова API. Это URL, который Postman будет использовать с этими параметрами запроса при выполнении вызова API.
`http://library.demo.local/api/v1/books?includeISBN=true&sortBy=author`
Нажмите Send.
Обратите внимание, что теперь в теле отображается тот же список книг, отсортированный по авторам и включающий ISBN, который вы видели на сайте School Library API.
```json
[
  {
    "id": 3,
    "title": "NetAcad: 20 Years Of Online-Learning",
    "author": "Cisco Systems Inc",
    "isbn": "000-0000001123"
  },
  {
    "id": 2,
    "title": "Linux for Networkers",
    "author": "Cisco Systems Inc.",
    "isbn": "000-0000000123"
  },
  {
    "id": 0,
    "title": "IP Routing Fundamentals",
    "author": "Mark A. Sportack",
    "isbn": "978-1578700714"
  },
  {
    "id": 1,
    "title": "Python for Dummies",
    "author": "Stef Maruch Aahz Maruch",
    "isbn": "978-0471778646"
  },
  {
    "id": 4,
    "title": "Industrial Society and Its Future",
    "author": "Theodore John Kaczynski"
  },
  {
    "id": 5,
    "title": "Первая научная история войны 1812 года",
    "author": "Евгений Николаевич Понасенков"
  }
]
```

## Часть 4: Использование Python для добавления 100 книг в API Simulator
> Вы можете использовать инструмент OpenAPI Specification Try It или Postman, чтобы добавить столько книг, сколько хотите. Однако вам придется добавлять их по одной за раз. Лучшим решением было бы написать программу для добавления книг. В этой части вы смоделируете процесс добавления 100 книг с помощью библиотеки Python faker.

### Шаг 1: Откройте Visual Studio (VS) Code и перейдите в каталог school-library.
Откройте VS Code из кнопки меню или двойным щелчком по значку на рабочем столе.
Click File > Open Folder..., перейдите в каталог labs/devnet-src/school-library folder, и нажмите OK.

### Шаг 2: Исследуйте библиотеки, используемые программой add100RandomBooks.py.
В панели VS Code EXPLORER слева щелкните файл add100RandomBooks.py, чтобы открыть его, если это необходимо.

В верхней части обратите внимание на "shebang", который устанавливает интерпретатор на Python 3, а затем на три импортируемые библиотеки.
```python
#!/usr/bin/env python3

import requests
import json
from faker import Faker
```
Здесь и далее мы будем использовать библиотеку запросов Python — requests, которая необходима для выполнения запросов API с помощью GET, POST, DELETE и других методов HTTP.

Faker — это библиотека Python, которая генерирует для вас "фальшивые" данные. Эта программа использует библиотеку Python faker для генерации случайных названий книг, авторов и ISBN.

Откройте окно терминала и запустите Python 3.
Из faker импортируйте модуль Faker().
Назначьте модуль Faker() на fake.
Чтобы увидеть все методы, введите fake. а затем дважды нажмите клавишу табуляции. Обратите внимание на метод fake.name(), который вы будете использовать в следующем шаге. В следующем шаге и далее в этой лабораторной работе вы также будете использовать три выделенных метода (перед которыми стоит fake.): catch_phrase(), isbn13() и name().
```shell
devasc@labvm:~/labs/devnet-src/school-library$ python3
Python 3.8.2 (default, Apr 27 2020, 15:53:34) 
[GCC 9.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from faker import Faker
>>> fake = Faker()
>>> fake.<press Tab key twice – be sure you include the period>
Display all 252 possibilities? (y or n)
fake.add_provider(               fake.future_datetime(            fake.pyfloat(
fake.address(                    fake.generator_attrs             fake.pyint(
fake.am_pm(                      fake.get_formatter(              fake.pyiterable(
<вывод опущен>
fake.catch_phrase(               fake.ipv4_public(                fake.random_element(
fake.chrome(                     fake.isbn10(                     fake.random_int(
fake.city(                       fake.isbn13(                     fake.random_letter(
<вывод опущен>
fake.date_time_ad(               fake.msisdn(                     fake.texts(
fake.date_time_between(          fake.name(                       fake.time(
<вывод опущен>
fake.future_date(                fake.pydict(                     fake.zipcode_plus4(
>>>
```

### Шаг 3: Потренируйтесь генерировать случайные данные с помощью библиотеки faker.
Введите следующую команду для создания вымышленного имени. При каждом выполнении команды будет создаваться разное вымышленное имя.
```shell
>>> print('Меня зовут {}.'.format(fake.name()))
Меня зовут Katherine Ross.
>>>
```
Используя три выделенных сообщения из Шага 2, введите команду, которая выведет следующий фальшивый вывод.
```shell
Меня зовут Gary Castaneda и я автор "Organic incremental neural-net" (ISBN 978-0-669-01935-3).
>>> 
Пердполагаемая команда:
>>> print('Меня зовут {} и я автор "{}" (ISBN {}).'.format(fake.name(),fake.catch_phrase(),fake.isbn13()))
```
Позже в программе используется цикл для итерации этих трех методов для создания записей для школьной библиотеки. Введите следующее, чтобы сгенерировать 10 случайных имен. После "..." вам нужно будет второй раз нажать клавишу return.
```shell
>>> for i in range(10):
...     print(fake.name())
... 
Kevin Moyer
Mr. Christopher Green MD
Spencer Jensen
Whitney Guzman
Nicole Scott
Tammy Lewis
Craig Edwards
Michael Diaz
Ryan Mccoy
Terry Rocha
>>>
```
Выйдите из интерпретатора Python после завершения работы с библиотекой faker.
```shell
>>> quit()
devasc@labvm:~/labs/devnet-src/school-library$
```

### Шаг 4: Рассмотрите переменные функции.
Две функции в программе используют три переменные для получения токена авторизации от службы School Library API.
```python
APIHOST = "http://library.demo.local"
LOGIN = "cisco"
PASSWORD = "Cisco123!"
```

### Шаг 5: Рассмотрите функцию getAuthToken.
Функция getAuthToken использует три переменные для построения запроса. Переменная r вызывает метод POST для API loginViaBasic и сохраняет значение токена в случае успешного вызова. Обратите внимание на использование f-строки для построения URL запроса.
```python
def getAuthToken():
    authCreds = (LOGIN, PASSWORD)
    r = requests.post(
        f"{APIHOST}/api/v1/loginViaBasic", 
        auth = authCreds
    )
```
Если вызов не удался (Статус код HTTP не равен 200), возникает исключение и выводится в окно терминала. Снова обратите внимание на использование f-строки для построения сообщения об исключении. Вы можете проверить код исключения, изменив одну из переменных в Шаге 4.
```python
if r.status_code == 200:
        return r.json()["token"]
    else:
        raise Exception(f"Статус код {r.status_code} и сообщение {r.text}, при попытке авторизации.")
```

### Шаг 6: Просмотрите функцию addBook.
Подобно функции addAuthToken, функция addBook использует три переменные, показанные в шаге 4, для построения запроса. Переменная r вызывает метод POST для API books. Данные поступают из переменной book, которая указывается в заключительной части программы.
```python
def addBook(book, apiKey):
    r = requests.post(
        f"{APIHOST}/api/v1/books", 
        headers = {
            "Content-type": "application/json",
            "X-API-Key": apiKey
            },
        data = json.dumps(book)
    )
```
Если вызов не удался, возникает исключение и выводится в окно терминала. Вы можете проверить это, изменив одну из переменных в Шаге 4.
```python
if r.status_code == 200:
        print(f"Книга {book} добавлена.")
    else:
        raise Exception(f"Код ошибки {r.status_code} и сообщение {r.text}, при попытке добавления книги {book}.")
```

### Шаг 7: Просмотрите код, вызывающий эти две функции.
Вызывается функция addAuthToken, и результаты сохраняются в переменной apiKey.
```python
apiKey = getAuthToken()
```
Модуль Faker() устанавливается на переменную с именем fake. Затем цикл for выполняет итерацию 100 раз. Переменная i используется позже в цикле для установки значения ключа id для каждой новой книги от 4 до 104 включительно.
> Примечание: Если вы хотите сохранить две предыдущие книги, добавленные ранее в этой лаборатории, измените диапазон на (6, 106).
```python
fake = Faker()
for i in range(4, 104):
```
Далее, три переменные хранят значения методов, вызванных из модуля Faker(): catch_phrase(), name() и isbn13().
```python
    fakeTitle = fake.catch_phrase()
    fakeAuthor = fake.name()
    fakeISBN = fake.isbn13()
```
Напомним, что для параметра полезной нагрузки API books требуется JSON в следующем формате:
```json
{
  "id": 0,
  "title": "string",
  "author": "string"
}
```
Переменная book строится с использованием трех необходимых ключей для параметра полезной нагрузки и значений из трех поддельных переменных.
```python
book = {"id":i, "title": fakeTitle, "author": fakeAuthor, "isbn": fakeISBN}
```
Наконец, вызывается функция addBook, передающая переменные book и apiKey. Поскольку функция addBook является частью цикла, она будет вызвана 101 раз, по одному разу для идентификаторов книг с 4 по 105.

### Шаг 8: Запустите и проверьте программу add100RandomBooks.py.
Введите команду Python 3 для запуска программы add100RandomBooks.py. Вы должны получить результат, похожий на следующий, хотя названия ваших книг и номера ISBN будут иметь другие поддельные значения.
```shell
devasc@labvm:~/labs/devnet-src/school-library$ python3 add100RandomBooks.py
Book {'id': 4, 'title': 'Assimilated client-server frame', 'author': 'Chelsea Mitchell', 'isbn': '978-0-411-83123-3'} added.
Book {'id': 5, 'title': 'Adaptive tangible conglomeration', 'author': 'Edward Ryan', 'isbn': '978-1-64406-014-8'} added.
<вывод опущен>
Book {'id': 103, 'title': 'Fundamental uniform data-warehouse', 'author': 'Dennis David', 'isbn': '978-1-68465-896-1'} added.
Book {'id': 104, 'title': 'Organic 4thgeneration functionalities', 'author': 'Nicole Gilbert', 'isbn': '978-0-13-176202-2'} added.
devasc@labvm:~/labs/devnet-src/school-library$
``` 
Вернитесь в браузер Chromium и обновите веб-страницу `http://library.demo.local/`. Теперь вы должны увидеть добавленные 100 новых книг.

> Примечание: Если вы попали на страницу документации API вместо главной страницы (`http://library.demo.local/api/v1/docs`) и используете функцию Try It out, вы получите список только первых 10 книг. Вы можете ввести значение от 2 до 10 в параметр страницы, чтобы увидеть остальные книги.

Как бы вы добавили еще 100 книг?
