# Установка виртуальной машины CSR1000v

## Цель лабораторной работы:
- Часть 1: Установка виртуальной машины CSR1000v на VirtualBox
- Часть 2: Проверка подключения с CSR1000v VM
## Необходимые ресурсы:
- ПК с не менее чем 4 ГБ оперативной памяти и 2 ГБ свободного дискового пространства
- Virtual Box или VMWare
- DEVASC виртуальная машина

## Порядок выполнения работы:
## Часть 1: Установка виртуальной машины CSR1000v
> Установите виртуальную машину CSR1000v непосредственно на компьютер x86. Для этого требуется не менее 4 ГБ оперативной памяти.

### Шаг 1: Только для преподавателя: Загрузите ISO-файл CSR1000v.
Попросите своего преподавателя может раздать образ `csr1000v-universalk9.16.09.05.iso`.

### Шаг 2: Загрузите OVA-файл CSR1000v VM.
Загрузите файл `DEVASC_CSR1000v.zip`.
Этот файл содержит шаблоны VirtualBox и VMware. Распакуйте файл, чтобы получить доступ к виртуальным машинам.

### Шаг 3: Установите виртуальную машину CSR1000v.
Откройте VirtualBox Manager или VMware Workstation.
Выберите
- Файл > Импортировать в VirtualBox 
- Файл > Открыть в VMware. В VMware Workstation Player, выбирите Player > Файл > Открыть
В VirtualBox выберите файл `CSR1000v_for_VirtualBox.ova` и нажмите Открыть и Импортировать.

В VMware выберите файл CSR1000v_for_VMware.ova и нажмите Открыть.
Нажмите Импорт
Теперь вы увидите, что виртуальная машина CSR1000v добавлена в VirtualBox или VMware

### Шаг 4: Обновите расположение установочного ISO.
Выберите Параметры виртуальной машины или нажмите Редактировать параметры виртуальной машины.

В настройках виртуальной машины перейдите к самому первому параметру CD-привода
- В VirtualBox: VM Settings > Storage > CD device (первый CD Drive в списке).
- В VMware: VM Settings > первый в списке привод "CD/DVD (IDE)".

В настройках первого CD-привода замените используемый в настоящее время ISO-файл
- В VirtualBox: Атрибуты > Значок CD > Выберите файл диска ...
- В VMware: Рядом с пунктом "Использовать файл образа ISO" нажмите Обзор.
Выберите файл `csr1000v-universalk9.16.09.05.iso`, который вы получили от преподавателя на шаге 1.

**Attention all minecraft gamers**, НЕ изменяйте настройки второго CD-привода. Он используется для начальной настройки маршрутизатора.

Нажмите OK, чтобы сохранить настройки виртуальной машины.

### Шаг 5: Для VirtualBox на Mac и Linux убедитесь, что CSR1000v использует адаптер только для хоста.
В VirtualBox нажмите Файл > Менеджер сетей хоста

Убедитесь, что существует хост-адаптер с именем, например vxboxnet0, с адресом/маской IPv4 192.168.56.1/24. Важно, чтобы хост-адаптер находился в сети 192.168.56.0/24

Если хост-адаптер не существует, нажмите Создать.
Если адрес IPv4 не `192.168.56.1/24`, выберите адаптер и нажмите Свойства. Измените адрес IPv4 и нажмите Закрыть.

### Шаг 6: Запустите виртуальную машину CSR1000v.
Выберите виртуальную машину CSR1000v и нажмите Start или Power On.
Если вы получите следующее сообщение, продолжите выполнение этого шага, в противном случае перейдите к следующему шагу:

> _Could not start the machine DEVASC-CSR1000v because the following physical network interfaces were not found:
VirtualBox Host-Only Ethernet Adapter (adapter 1)
You can either change the machine's network settings or stop the machine._

Проверьте следующее:
Адаптер 1 – Прикриплен к: Host-only Adapter
Нажмите OK


### Шаг 7: Процесс загрузки виртуальной машины.
В процессе загрузки вы увидите несколько сообщений, включая сообщение Press any key to continue, чтобы продолжить. Вы можете игнорировать все эти сообщения.
Появится экран выбора, на котором можно выбрать различные параметры конфигурации. Не выбирайте никаких вариантов конфигурации. Установка продолжится самостоятельно.
Дождитесь завершения процесса начальной установки. Это займет несколько минут при первой загрузке CSR1000v.
Вы увидете сообщения IOS от различных процессов, включая %SSH, %PKI и %CRYPTO_ENGINE. Через несколько минут сообщения прекратятся.

В окне VM нажмите Enter
Теперь вы должны увидеть подсказку: CSR1kv>
Введите enable для перехода в привилегированный режим EXEC. Пароль для enable отсутствует.
```shell
CSR1kv> enable
CSR1kv# 
```

## Часть 2: Проверка связи с виртуальной машиной CSR1000v.
В этой части вы проверите подключение устройств:

### Шаг 1: Проверьте IPv4-адрес CSR1000v.
На виртуальной машине CSR1000v используйте команду show ip interface brief, чтобы проверить IPv4-адрес интерфейса GigabitEthernet1. Скорее всего, CSR1000v использует IPv4-адрес из адресного пространства 192.168.x.y.

Запишите этот адрес, он используется в остальной части лабораторной работы.

### Шаг 2: Запустите виртуальную машину DEVASC.
Если вы всё еще не завершили лабораторную работу - Установка лабораторной среды виртуальной машины, то похоже кто-то берёт чужие отчеты. Сделайте это сейчас. Если это клевета, то вы уже завершили эту лабораторную работу, запустите виртуальную машину DEVASC.

### Шаг 3: Пропингуйте CSR1000v с DEVASC.
На DEVASC откройте окно терминала.
Выполните пинг виртуальной машины CSR1000v по ее адресу IPv4.
```shell
devasc@labvm:~$ ping 192.168.56.101
PING 192.168.56.101 (192.168.56.101) 56(84) bytes of data.
64 bytes from 192.168.56.101: icmp_seq=2 ttl=254 time=50.1 ms
64 bytes from 192.168.56.101: icmp_seq=3 ttl=254 time=1.13 ms
64 bytes from 192.168.56.101: icmp_seq=4 ttl=254 time=1.01 ms
64 bytes from 192.168.56.101: icmp_seq=5 ttl=254 time=1.04 ms
64 bytes from 192.168.56.101: icmp_seq=6 ttl=254 time=1.76 ms
64 bytes from 192.168.56.101: icmp_seq=7 ttl=254 time=1.26 ms
64 bytes from 192.168.56.101: icmp_seq=8 ttl=254 time=1.79 ms
^C
--- 192.168.56.101 ping statistics ---
8 packets transmitted, 7 received, 12,5% packet loss, time 7081ms
rtt min/avg/max/mdev = 1.010/8.293/50.064/17.055 ms
devasc@labvm:~$
```

### Шаг 4: Установите защищенное соединение (SSH) с CSR1000v.
Некоторые из задач, которые вы будете выполнять в последующих лабораторных работах, потребуют сеанса SSH с CSR1000v.
Подключитесь к CSR1000v с помощью SSH из виртуальной машины DEVASC. Используйте пароль cisco123! для аутентификации. Обратите внимание, что вы автоматически находитесь в привилегированном режиме EXEC. Введите exit, чтобы завершить сеанс SSH.
```shell
devasc@labvm:~$ ssh cisco@192.168.56.101
Password: 

*                                           *
**                                         **
***                                       ***
***  Cisco Networking Academy             ***
***                                       ***
***  This software is provided for        ***
***   Educational Purposes                ***
***    Only in Networking Academies       ***
***                                       ***
**                                         **
*                                           *



CSR1kv# exit
Connection to 192.168.56.101 closed by remote host.
Connection to 192.168.56.101 closed.
devasc@labvm:~$ 
```

### Шаг 5: Из виртуальной машины DEVASC VM зайдите в CSR1000v WebUI (Web User Interface).
Откройте веб-браузер на виртуальной машине DEVASC.
Для URL-адреса введите: `https://192.168.56.101`.
Примечание: Обязательно используйте "https".
Если в браузере появится предупреждение, подобное "Ваше соединение не является приватным":
1)	Нажмите Дополнительно.
2)	Нажмите Продолжить до 192.168.56.101 (небезопасно).

Теперь вы увидите экран LOGIN. Введите следующие данные:
1)	Имя пользователя: cisco
2)	Пароль: cisco123!
3)	Нажмите кнопку LOGIN NOW.
Теперь вы увидите приборную панель для CSR1000v, а также получаете доступ к WebUI CSR1000v с виртуальной машины DEVASC.
### Шаг 6: Зайдите в CSR1000v WebUI со своего ПК.
Откройте веб-браузер на локальном компьютере, не внутри DEVASC VM.
Для URL-адреса введите: `https://192.168.56.101`.
Примечание: Обязательно используйте `"https"`.
Если ваш браузер выдает предупреждение, подобное "Ваше соединение не является приватным":
1) Нажмите Дополнительно.
2) Щелкните Proceed to 192.168.56.101 (unsafe).

Теперь вы увидите экран LOGIN. Введите следующие данные:
1) Имя пользователя: cisco
2) Пароль: cisco123!
3) Нажмите кнопку LOGIN NOW.
Теперь вы также увидите приборную панель CSR1000v и WebUI CSR1000v.
